!function(){function a(){var a=0,b=0;this.output="",this.readByte=function(c){return"string"==typeof c&&(c=c.charCodeAt(0)),0>a?b|=c>>-a:b=248&c<<a,a>3?(a-=8,1):(4>a&&(this.output+=e[b>>3],a+=5),0)},this.finish=function(c){var d=this.output+(0>a?e[b>>3]:"")+(c?"$":"");return this.output="",d}}function b(){var a=0,b=0;this.output="",this.readChar=function(c){"string"!=typeof c&&"number"==typeof c&&(c=String.fromCharCode(c)),c=c.toUpperCase();var d=g()[c];"undefined"!=typeof d&&(d<<=3,b|=d>>>a,a+=5,a>=8&&(this.output+=String.fromCharCode(b),a-=8,b=a>0?255&d<<5-a:0))},this.finish=function(b){var c=this.output+(0>a?e[bits>>3]:"")+(b?"$":"");return this.output="",c}}function c(b){return(new a).update(b,!0)}function d(a){return(new b).update(a,!0)}var e="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",f={o:0,i:1,l:1,s:5},g=function(){for(var a={},b=0;b<e.length;b++)a[e[b]]=b;for(var c in f)f.hasOwnProperty(c)&&(a[c]=a[""+f[c]]);return g=function(){return a},a};a.prototype.update=function(a,b){for(var c=0;c<a.length;)c+=this.readByte(a[c]);var d=this.output;return this.output="",b&&(d+=this.finish()),d},b.prototype.update=function(a,b){for(var c=0;c<a.length;c++)this.readChar(a[c]);var d=this.output;return this.output="",b&&(d+=this.finish()),d},base32={Decoder:b,Encoder:a,encode:c,decode:d},"undefined"!=typeof window?window.base32=base32:module.exports=base32}(),function(){function a(a,b,c){var d=b&&c||0,e=0;for(b=b||[],a.toLowerCase().replace(/[0-9a-f]{2}/g,function(a){16>e&&(b[d+e++]=m[a])});16>e;)b[d+e++]=0;return b}function b(a,b){var c=b||0,d=l;return d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]}function c(a,c,d){var e=c&&d||0,f=c||[];a=a||{};var g=null!=a.clockseq?a.clockseq:q,h=null!=a.msecs?a.msecs:(new Date).getTime(),i=null!=a.nsecs?a.nsecs:s+1,j=h-r+(i-s)/1e4;if(0>j&&null==a.clockseq&&(g=16383&g+1),(0>j||h>r)&&null==a.nsecs&&(i=0),i>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");r=h,s=i,q=g,h+=122192928e5;var k=(1e4*(268435455&h)+i)%4294967296;f[e++]=255&k>>>24,f[e++]=255&k>>>16,f[e++]=255&k>>>8,f[e++]=255&k;var l=268435455&1e4*(h/4294967296);f[e++]=255&l>>>8,f[e++]=255&l,f[e++]=16|15&l>>>24,f[e++]=255&l>>>16,f[e++]=128|g>>>8,f[e++]=255&g;for(var m=a.node||p,n=0;6>n;n++)f[e+n]=m[n];return c?c:b(f)}function d(a,c,d){var f=c&&d||0;"string"==typeof a&&(c="binary"==a?new k(16):null,a=null),a=a||{};var g=a.random||(a.rng||e)();if(g[6]=64|15&g[6],g[8]=128|63&g[8],c)for(var h=0;16>h;h++)c[f+h]=g[h];return c||b(g)}var e,f=this;if("function"==typeof require)try{var g=require("crypto").randomBytes;e=g&&function(){return g(16)}}catch(h){}if(!e&&f.crypto&&crypto.getRandomValues){var i=new Uint8Array(16);e=function(){return crypto.getRandomValues(i),i}}if(!e){var j=new Array(16);e=function(){for(var a,b=0;16>b;b++)0===(3&b)&&(a=4294967296*Math.random()),j[b]=255&a>>>((3&b)<<3);return j}}for(var k="function"==typeof Buffer?Buffer:Array,l=[],m={},n=0;256>n;n++)l[n]=(n+256).toString(16).substr(1),m[l[n]]=n;var o=e(),p=[1|o[0],o[1],o[2],o[3],o[4],o[5]],q=16383&(o[6]<<8|o[7]),r=0,s=0,t=d;if(t.v1=c,t.v4=d,t.parse=a,t.unparse=b,t.BufferClass=k,f.define&&define.amd)define(function(){return t});else if("undefined"!=typeof module&&module.exports)module.exports=t;else{var u=f.uuid;t.noConflict=function(){return f.uuid=u,t},f.uuid=t}}(),function(){"use strict";window.schat={net:{},ui:{},utils:{},lang:{},page:""}}(),function(){"use strict";function a(){this.routes={},this.leave=null,this.current="",window.addEventListener("load",function(){setTimeout(function(){window.addEventListener("popstate",function(){this.checkRoutes(document.location.pathname)}.bind(this))}.bind(this),0)}.bind(this))}var b=/:\w+/g,c=/\*\w+/g;a.prototype.route=function(a,d,e){a=a.replace(b,"([^/]+)").replace(c,"(.*?)"),e=e||null,this.routes["^"+a+"$"]=[d,e]},a.prototype.navigate=function(a,b,c){c===!0?window.history.replaceState({url:a},"",a):window.history.pushState({url:a},"",a),b!==!1&&this.checkRoutes(a)},a.prototype.checkRoutes=function(a){var b,c="^$",d=[];for(var e in this.routes)if(this.routes.hasOwnProperty(e)&&(b=new RegExp(e),b.test(a))){c=e,d=b.exec(a).slice(1);break}null!==this.leave&&this.current!==c&&this.leave(),this.routes[c][0].apply(window,d),this.leave=this.routes[c][1],this.current=c},schat.router=new a}(),function(){"use strict";var a=window.schat.utils;a.isFunction=function(a){return"function"==typeof a},a.isArray=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)},a.randomId=function(){var a=new Array(16);return uuid.v4(null,a,0),base32.encode(a)},a.format=function(a,b){return a.replace(/{(\d+)}/g,function(a,c){return"undefined"!=typeof b[c]?b[c]:a})}}(),function(){"use strict";function a(a,b,c){f[a]={data:b,date:c,dirty:!1}}function b(a){return f.hasOwnProperty(a)?f[a]:null}function c(a){return f.hasOwnProperty(a)?f[a].date:0}function d(){g=!1}function e(){if(!g){for(var a in f)f.hasOwnProperty(a)&&(f[a].dirty=!0);g=!0}}var f={},g=!0;"undefined"!=typeof window?schat.net.cache={put:a,get:b,contains:c,close:e,open:d}:(exports.put=a,exports.get=b,exports.contains=c,exports.close=e,exports.open=d)}(),function(){"use strict";function a(a,b,c,d){var e=0,f=0,g=!1;("undefined"==typeof b||null===b)&&(b=2),a=a.toString(),d!==!1&&(a=a.replace(/&/g,"&amp;")),a=a.replace(/</g,"&lt;").replace(/>/g,"&gt;");var h={ENT_NOQUOTES:0,ENT_HTML_QUOTE_SINGLE:1,ENT_HTML_QUOTE_DOUBLE:2,ENT_COMPAT:2,ENT_QUOTES:3,ENT_IGNORE:4};if(0===b&&(g=!0),"number"!=typeof b){for(b=[].concat(b),f=0;f<b.length;f++)0===h[b[f]]?g=!0:h[b[f]]&&(e|=h[b[f]]);b=e}return b&h.ENT_HTML_QUOTE_SINGLE&&(a=a.replace(/'/g,"&#039;")),g||(a=a.replace(/"/g,"&quot;")),a}schat.utils.encode=a}(),function(){"use strict";var a={};a["common-signin"]="Sign in",a["common-nick"]="Nick",a["common-your-nick"]="Your Nick",a["common-email"]="Email",a["common-your-email"]="Your Email",a["common-male"]="Male",a["common-female"]="Female",a["common-rooms"]="Rooms",a["common-stats"]="Statistics",a["common-hour"]="Hour",a["common-day"]="Day",a["common-week"]="Week",a["common-month"]="Month",a["common-year"]="Year",a["oauth-header"]="Sign in using your account with",a["channels-no-title"]="No title",a["stats-stats"]='Now {0} online in {1}. Peak online <b>{2}</b> was <span class="timeago" data-date="{3}"></span>.',a["stats-users"]=function(a){return 1===a?"<b>%d</b> user":"<b>%d</b> users"},a["stats-rooms"]=function(a){return 1===a?"<b>%d</b> room":"<b>%d</b> rooms"},a["stats-title"]="Users online",a["stats-title-hour"]="by hour",a["stats-title-day"]="by day",a["stats-title-week"]="by week",a["stats-title-month"]="by month",a["stats-title-year"]="by year",a["user-not-found"]="User not found",a["user-status-offline"]="Offline",a["user-status-online"]="Online",a["user-status-away"]="Away",a["user-status-dnd"]="Do not disturb",a["user-status-free"]="Free for Chat",a.timeago={prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"<b>%d</b> minutes",hour:"about an hour",hours:"about <b>%d</b> hours",day:"a day",days:"<b>%d</b> days",month:"about a month",months:"<b>%d</b> months",year:"about a year",years:"<b>%d</b> years",wordSeparator:" ",numbers:[]},schat.lang.en=a}(),function(){"use strict";function a(a,b,c,d){var e=a%10;return 1==e&&(1==a||a>20)?b:e>1&&5>e&&(a>20||10>a)?c:d}var b={};b["common-signin"]="Войти",b["common-nick"]="Ник",b["common-your-nick"]="Ваш ник",b["common-email"]="Email",b["common-your-email"]="Ваш Email",b["common-male"]="Мужской",b["common-female"]="Женский",b["common-rooms"]="Комнаты",b["common-stats"]="Статистика",b["common-hour"]="Час",b["common-day"]="День",b["common-week"]="Неделя",b["common-month"]="Месяц",b["common-year"]="Год",b["oauth-header"]="Войти в чат через свой аккаунт в",b["channels-no-title"]="Без заголовка",b["stats-stats"]='Сейчас {0} онлайн в {1}. Пиковый онлайн <b>{2}</b> был <span class="timeago" data-date="{3}"></span>.',b["stats-users"]=function(b){return a(b,"<b>%d</b> пользователь","<b>%d</b> пользователя","<b>%d</b> пользователей")},b["stats-rooms"]=function(b){return a(b,"<b>%d</b> комнате","<b>%d</b> комнатах","<b>%d</b> комнатах")},b["stats-title"]="Пользователи онлайн",b["stats-title-hour"]="за час",b["stats-title-day"]="за день",b["stats-title-week"]="за неделю",b["stats-title-month"]="за месяц",b["stats-title-year"]="за год",b["user-not-found"]="Пользователь не найден",b["user-status-offline"]="Не в сети",b["user-status-online"]="В сети",b["user-status-away"]="Отсутствую",b["user-status-dnd"]="Не беспокоить",b["user-status-free"]="Готов общаться",b.timeago={prefixAgo:null,prefixFromNow:"через",suffixAgo:"назад",suffixFromNow:null,seconds:"меньше минуты",minute:"минуту",minutes:function(b){return a(b,"<b>%d<b/> минута","<b>%d</b> минуты","<b>%d</b> минут")},hour:"час",hours:function(b){return a(b,"<b>%d</b> час","<b>%d</b> часа","<b>%d</b> часов")},day:"день",days:function(b){return a(b,"<b>%d</b> день","<b>%d</b> дня","<b>%d</b> дней")},month:"месяц",months:function(b){return a(b,"<b>%d</b> месяц","<b>%d</b> месяца","<b>%d</b> месяцев")},year:"год",years:function(b){return a(b,"<b>%d</b> год","<b>%d</b> года","<b>%d</b> лет")}},schat.lang.ru=b}(),function(){"use strict";schat.lang.current=localStorage.getItem("language")||(navigator.language||navigator.userLanguage).substr(0,2),window.tr=function(a,b){var c=schat.lang.current;schat.lang.hasOwnProperty(c)||(c="en");var d=schat.lang[c][a];return d||"en"==c||(d=schat.lang.en[a]),d=d||a,schat.utils.isFunction(d)?d(b).replace("%d",b):d}}(),function(){var a={};a.REQ=["type","id","date","method","request","headers","data"],a.REP=["type","id","date","status","headers","data"],a.RES=["type","id","date","headers","data"];var b={date:0,status:200,method:"GET",headers:{}},c=function(c,d){if("object"!=typeof c)return null;if(c.type=c.type||d,!a.hasOwnProperty(c.type))return null;var e,f=[c.type],g=a[c.type];"undefined"!=typeof schat&&(c.id=c.id||schat.utils.randomId());for(var h=1;h<g.length-1;h++)e=g[h],c[e]=c[e]||b[e],f.push(c[e]);return"[object Array]"==Object.prototype.toString.call(c.data)?f.push.apply(f,c.data):"undefined"!=typeof c.data?f.push(c.data):f.push(null),f},d=function(c){if("[object Array]"!=Object.prototype.toString.call(c)||c.length<4||!a.hasOwnProperty(c[0]))return null;for(var d,e={type:c[0],id:c[1]},f=a[e.type],g=2;g<f.length-1;g++)d=f[g],e[d]=c[g]||b[d];return c.splice(0,f.length-1),e.data=c,e};"undefined"!=typeof window?(schat.net.formats=a,schat.net.request=function(a){return c(a,"REQ")},schat.net.reply=function(a){return d(a)}):(exports.formats=a,exports.request=function(a){return d(a)},exports.reply=function(a){return c(a,"REP")},exports.write=c,exports.read=d,exports.error=function(a,b,d){return c({id:a,status:b,data:d},"REP")})}(),function(){"use strict";SockJS.prototype.send=function(a){if(this.readyState===SockJS.CONNECTING)throw new Error("INVALID_STATE_ERR");return this.readyState===SockJS.OPEN&&this._transport.doSend(JSON.stringify(a)),!0};var a={url:"/chat",_pending:{},_debug:!1,start:function(){return this!==a&&a.start.call(a),this._debug=!!localStorage.getItem("debug")&&console&&console.log&&console.log.apply,this.socket=new SockJS(this.url),this.socket.addEventListener("open",this._open.bind(this)),this.socket.addEventListener("close",this._close.bind(this)),this.socket.addEventListener("message",this._message.bind(this)),!0},send:function(b,c){this!==a&&a.send.call(a,b,c);var d=schat.net.request(b);return null===d?!1:(schat.utils.isFunction(c)&&(this._pending[b.id]=[b,c]),this._debug&&console.log("Client.send:",d),this.socket.send(d),!0)},get:function(b,c){this!==a&&a.send.call(a,b,c);var d=schat.net.cache.get(b);return null===d||d.dirty?this.send({request:b,date:d?d.date:0},c):(c({id:"",date:d.date,status:200,data:d.data},b),!0)},on:function(a,b){this._listeners=this._listeners||{};var c=this._listeners[a]=this._listeners[a]||[];c.indexOf(b)<0&&c.push(b)},off:function(a,b){if(this._listeners&&this._listeners[a]){if(!b)return delete this._listeners[a],void 0;for(var c=this._listeners[a],d=c.length;d--;)b===c[d]&&c.splice(d,1)}},emit:function(a,b){if(this._listeners&&this._listeners[a])for(var c=this._listeners[a],d=0;d<c.length;d++)c[d](b)},_message:function(a){var b=schat.net.reply(a.data);if(null!==b){if(this._debug&&console.log("Client._message:",b),this._pending.hasOwnProperty(b.id)){var c=this._pending[b.id][0];if("GET"===c.method)if(304===b.status){var d=schat.net.cache.get(c.request);null!==d&&schat.net.cache.put(c.request,d.data,b.date)}else 200===b.status&&schat.net.cache.put(c.request,b.data,b.date);this._pending[b.id][1](b,c.request),delete this._pending[b.id]}this.emit("packet",b),"RES"===b.type&&(b.id===this.serverId+"/parent"?b.data[0]===this.serverId?(schat.net.cache.open(),this.emit("open")):schat.net.cache.close():schat.net.cache.put(b.id,b.data,b.date),b.status=200,this.emit("res."+b.id,b))}},_close:function(){this._debug&&console.log("Client._close:"),schat.net.cache.close(),this.emit("close"),window.setTimeout(this.start.bind(this),2e3)},_open:function(){this._debug&&console.log("Client._open:",this.socket.protocol),schat.net.cache.open(),this.serverId=localStorage.getItem("serverId"),"string"!=typeof this.serverId||34!==this.serverId.length?this.send({request:"server/server"},function(a){200===a.status&&(this.serverId=a.data[0].id,localStorage.setItem("serverId",this.serverId)),this.emit("open")}.bind(this)):this.emit("open")}};window.schat.net.client=a}(),function(){"use strict";function a(){"index"==schat.page&&b()}function b(){return 1!=h.socket.readyState?!1:(h.on("res."+h.serverId+"/index",c),h.get(h.serverId+"/index",c),h.on("res."+h.serverId+"/stats",d),h.get(h.serverId+"/stats",d),!0)}function c(a){"index"==schat.page&&(200===a.status&&(null===i&&(i=new schat.ui.MainWidget),i.date.index=a.date,i.setRooms(a.data)),e())}function d(a){"index"===schat.page&&(200===a.status&&(null===i&&(i=new schat.ui.MainWidget),i.date.stats=a.date,i.setStats(a.data)),e())}function e(){i&&i.date.index&&i.date.stats&&schat.ui.Loader.hide()}function f(){schat.page="index",schat.router.navigate("/",!1,!0),schat.ui.Loader.show(),b()}function g(){h.off("res."+h.serverId+"/index",c),h.off("res."+h.serverId+"/stats",d),i=null}var h=schat.net.client,i=null;schat.router.route("",f,g),h.on("open",a)}(),function(){"use strict";var a={widget:null};a.providers=function(a){"signin"===schat.page&&200===a.status&&(this.widget=new schat.ui.OAuthWidget(a.data[0],a.data[1]),localStorage.setItem("auth",JSON.stringify({state:a.data[1].substring(0,34),secret:a.data[2]})),schat.ui.Loader.hide())},a.state=function(a){"welcome"===schat.page&&200===a.status&&(this.widget=new schat.ui.WelcomeWidget(a.data[0]),schat.ui.Loader.hide())},a.open=function(){"signin"==schat.page?this.getProviders():"welcome"==schat.page&&this.getState()},a.getProviders=function(){return 1!=schat.net.client.socket.readyState?!1:(schat.net.client.send({method:"AUTH",request:"providers",data:window.location.protocol+"//"+window.location.host+"/w"},a.providers.bind(a)),!0)},a.getState=function(){if(1!=schat.net.client.socket.readyState)return!1;var b=null;try{b=JSON.parse(localStorage.getItem("auth"))}catch(c){}return null===b?(schat.router.navigate("/signin"),!1):(schat.net.client.send({method:"AUTH",request:"state",data:[b.state,b.secret]},a.state.bind(this)),!0)},schat.router.route("/signin",function(){schat.page="signin",a.getProviders(),schat.ui.Loader.show()}),schat.router.route("/w",function(){schat.page="welcome",schat.router.navigate("/welcome",!0,!0)}),schat.router.route("/welcome",function(){schat.page="welcome",a.getState(),schat.ui.Loader.show()}),schat.net.client.on("open",a.open.bind(a))}(),function(){"use strict";function a(a){"stats"===schat.page&&(null===g&&(g=new schat.ui.StatsWidget),g.setStats(a.data))}function b(){return 1!=f.socket.readyState?!1:(f.on("res."+f.serverId+"/stats",a),f.get(f.serverId+"/stats",a),!0)}function c(){"stats"===schat.page&&(b(),schat.ui.Loader.hide())}function d(a){schat.page="stats",(!a||"hour"!==a&&"day"!==a&&"week"!==a&&"month"!==a&&"year"!==a)&&(a=localStorage.getItem("statsPeriod"),a=a||"week",schat.router.navigate("/stats/"+a,!1,!0)),localStorage.setItem("statsPeriod",a),b(),null===g&&(g=new schat.ui.StatsWidget),g.setPeriod(a)}function e(){g&&g.clear(),f.off("res."+f.serverId+"/stats",a),g=null}var f=schat.net.client,g=null;schat.router.route("/stats",d,e),schat.router.route("/stats/:period",d,e),f.on("open",c)}(),function(){"use strict";function a(a,b){if(schat.page===g){console.log("USERE",a,b);var c=a.data[0];c.id=b,i.add(c)}}function b(b){if(schat.page===g){if(null===i&&(i=new schat.ui.UsersWidget),200===b.status&&schat.utils.isArray(b.data))for(var c=b.data,d=0;d<c.length;d++)h.get(c[d],a);schat.ui.Loader.hide()}}function c(){return 1!=h.socket.readyState?!1:(h.get(h.serverId+"/users",b),!0)}function d(){schat.page===g&&c()}function e(){schat.page=g,c()}function f(){i=null}var g="users",h=schat.net.client,i=null;schat.router.route("/users",e,f),h.on("open",d)}(),function(){"use strict";function a(a){schat.page===g&&(200===a.status&&117===a.data[0].type?(null===i&&(i=new schat.ui.UserWidget),i.setUser(a.data[0])):f("user-not-found"))}function b(){return 1!=h.socket.readyState?!1:(h.on("res."+j,a),h.get(j,a),!0)}function c(){schat.page===g&&(b(),schat.ui.Loader.hide())}function d(a){return schat.page=g,a&&34==a.length?(j=a,b(),void 0):(f("user-not-found"),void 0)}function e(){i=null}function f(a){schat.ui.main.textContent="",schat.ui.main.setAttribute("class","panel-main"),schat.ui.main.appendChild(schat.ui.createElement("div",{"class":"alert alert-danger","data-tr":a}))}var g="user",h=schat.net.client,i=null,j="";schat.router.route("/user/:id",d,e),h.on("open",c)}(),function(){"use strict";window.schat.ui.main=document.getElementById("main"),window.schat.ui.createElement=function(a,b,c){var d=document.createElement(a);for(var e in b)b.hasOwnProperty(e)&&d.setAttribute(e,b[e]);return"string"==typeof c?d.innerHTML=c:"object"==typeof c&&c.hasOwnProperty("text")&&(d.textContent=c.text),b&&b.hasOwnProperty("data-tr")&&(d.innerHTML=tr(b["data-tr"])),d}}(),function(){var a={};a.widget=document.getElementById("loading"),a.visible=!0,a.show=function(b){a.visible||(b=b||300,a.visible=!0,a.timeout=setTimeout(function(){a.widget.style.display="block",setTimeout(function(){a.widget.style.opacity=.75},0)},b))},a.hide=function(){a.visible&&(clearTimeout(a.timeout),a.visible=!1,a.widget.style.opacity=0,setTimeout(function(){a.widget.style.display="none"},500))},window.schat.ui.Loader=a}(),function(){"use strict";function a(){schat.ui.main.textContent="",schat.ui.main.setAttribute("class","panel-main"),this.date={index:0,stats:0};var a=schat.ui.createElement("div",{"class":"panel panel-default panel-rooms"});a.appendChild(schat.ui.createElement("div",{"class":"panel-heading","data-tr":"common-rooms"})),this.rooms=schat.ui.createElement("div",{"class":"list-group"}),a.appendChild(this.rooms),schat.ui.main.appendChild(a),a=schat.ui.createElement("div",{"class":"panel panel-default panel-stats"}),a.appendChild(schat.ui.createElement("div",{"class":"panel-heading"},'<a href="/stats" class="internal" data-tr="common-stats">'+tr("common-stats")+"</a>")),this.stats=a.appendChild(schat.ui.createElement("div",{"class":"panel-body"})),schat.ui.main.appendChild(a)}a.prototype.setRooms=function(a){this.rooms.textContent="";for(var b=0;b<a.length;b++){var c=a[b][4];this.rooms.appendChild(schat.ui.createElement("div",{"class":"list-group-item"},'<span class="badge">'+a[b][2]+"</span>"+(2&c?'<i class="schat-icon schat-icon-pin pull-right"></i>':"")+(4&c?'<i class="schat-icon schat-icon-lock pull-right"></i>':"")+'<h5 class="list-group-item-heading"><a class="internal" href="/talk/'+a[b][0]+'">'+schat.utils.encode(a[b][1])+"</a></h5>"+'<small class="list-group-item-text text-muted">'+(""===a[b][3]?tr("channels-no-title"):schat.utils.encode(a[b][3]))+"</small>"))}},a.prototype.setStats=function(a){a=a[0],this.stats.innerHTML=schat.utils.format(tr("stats-stats"),[tr("stats-users",a.users[0]),tr("stats-rooms",a.rooms[0]),a.users[1],a.users[2]]),$(".timeago").timeago()},window.schat.ui.MainWidget=a}(),function(){"use strict";var a=function(a,b){this.widget=schat.ui.createElement("div",{"class":"center-widget oauth-widget"}),this.widget.appendChild(schat.ui.createElement("h3",{"data-tr":"oauth-header"}));for(var c,d=[],e=0;e<a.length;e++)c=schat.ui.createElement("a",{"class":"btn btn-default",href:a[e][3].replace("${STATE}",b)},'<i class="provider provider-'+a[e][0]+'"></i> '+a[e][2]),d.push(c),this.widget.appendChild(c);schat.ui.main.textContent="",schat.ui.main.setAttribute("class","center-wrapper"),schat.ui.main.appendChild(this.widget),this.adjustWidth(d)};a.prototype.adjustWidth=function(a){for(var b=0,c=0,d=0;d<a.length;d++)c=a[d].offsetWidth,c>b&&(b=c);for(d=0;d<a.length;d++)a[d].style.width=b+"px";this.widget.style.maxWidth=3*b+50+"px"},window.schat.ui.OAuthWidget=a}(),function(){"use strict";function a(a){var b=a.user||{};b.name=b.name||"",b.email=b.email||"",this.widget=schat.ui.createElement("form",{"class":"center-widget signin-widget clearfix"}),this.widget.appendChild(schat.ui.createElement("button",{type:"button","class":"close","data-dismiss":"alert","aria-hidden":!0},"&times;")),this.widget.appendChild(schat.ui.createElement("div",{"class":"form-group"},'<label for="nick-input" data-tr="welcome-nick">'+tr("common-nick")+"</label>"+'<div class="input-group">'+'<input type="text" class="form-control" id="nick-input" placeholder="'+tr("common-your-nick")+'" value="'+b.name+'">'+'<div class="input-group-btn">'+'<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span data-tr="common-male">'+tr("common-male")+'</span> <span class="caret"></span></button>'+'<ul class="dropdown-menu pull-right">'+'<li><a href="#" data-tr="common-male">'+tr("common-male")+"</a></li>"+'<li><a href="#" data-tr="common-female">'+tr("common-female")+"</a></li>"+"</ul>"+"</div>"+"</div>")),this.widget.appendChild(schat.ui.createElement("div",{"class":"form-group"},'<label for="email-input" data-tr="common-email">'+tr("common-email")+"</label>"+'<input type="text" class="form-control" id="email-input" placeholder="'+tr("common-your-email")+'" value="'+b.email+'">')),this.widget.appendChild(schat.ui.createElement("button",{type:"submit","class":"btn btn-primary pull-right","data-tr":"common-signin"})),schat.ui.main.textContent="",schat.ui.main.setAttribute("class","center-wrapper"),schat.ui.main.appendChild(this.widget)}window.schat.ui.WelcomeWidget=a}(),function(){"use strict";function a(){schat.ui.main.textContent="",schat.ui.main.setAttribute("class","panel-main");var a=b("div",{"class":"panel panel-default panel-stats"}),c=a.appendChild(b("div",{"class":"panel-heading"})).appendChild(b("h3"));c.appendChild(b("span",{"data-tr":"stats-title"})),c.appendChild(document.createTextNode(" "));var d=a.appendChild(b("div",{"class":"panel-body"}));this.interval=null,this.subtitle=c.appendChild(b("small")),this.graph=d.appendChild(b("img",{src:"/img/stats/users-day.png","class":"img-responsive img-stats-graph"})),this.pager=d.appendChild(b("ul",{"class":"pager"})),this.pager.innerHTML='<li><a class="internal" href="/stats/hour" data-tr="common-hour">'+tr("common-hour")+"</a></li> "+'<li><a class="internal" href="/stats/day" data-tr="common-day">'+tr("common-day")+"</a></li> "+'<li><a class="internal" href="/stats/week" data-tr="common-week">'+tr("common-week")+"</a></li> "+'<li><a class="internal" href="/stats/month" data-tr="common-month">'+tr("common-month")+"</a></li>",schat.ui.main.appendChild(a),a=b("div",{"class":"panel panel-default panel-stats"}),this.stats=a.appendChild(b("div",{"class":"panel-body"})),schat.ui.main.appendChild(a)}var b=schat.ui.createElement;a.prototype.periods=["hour","day","week","month"],a.prototype.setPeriod=function(a){this.clear(),this.subtitle.setAttribute("data-tr","stats-title-"+a),this.subtitle.textContent=tr("stats-title-"+a),this.graph.setAttribute("src","/img/stats/users-"+a+".png#"+(new Date).getTime());for(var b=this.pager.children,c=0;c<b.length;c++)b[c].setAttribute("class",a===this.periods[c]?"disabled":"");this.interval=setInterval(function(){this.graph.setAttribute("src","/img/stats/users-"+a+".png#"+(new Date).getTime())}.bind(this),3e4)},a.prototype.setStats=schat.ui.MainWidget.prototype.setStats,a.prototype.clear=function(){clearInterval(this.interval)},window.schat.ui.StatsWidget=a}(),function(){"use strict";function a(a){this.el=a,this.users={},this.list=[]}a.prototype.add=function(a){this.users[a.id]=a,this.list.push(a.id),a.el=this.el.appendChild(schat.ui.createElement("li",{"class":"list-group-item"},'<a class="internal" href="/user/'+a.id+'">'+a.name+"</a>"))},a.prototype.sort=function(){this.list.sort(function(a,b){return a=this.users[a].name.toLowerCase(),b=this.users[b].name.toLowerCase(),b>a?-1:a>b?1:0}.bind(this));for(var a,b=0;b<this.list.length;b++)a=this.users[this.list[b]],a.el=this.el.appendChild(a.el)},schat.ui.UserList=a}(),function(){"use strict";function a(){schat.ui.main.textContent="",schat.ui.main.setAttribute("class","panel-main");var a=b("div",{"class":"panel panel-default panel-users"});this.list=new schat.ui.UserList(a.appendChild(b("ul",{"class":"list-group"}))),schat.ui.main.appendChild(a)}var b=schat.ui.createElement;a.prototype.add=function(a){this.list.add(a)},schat.ui.UsersWidget=a}(),function(){"use strict";function a(){schat.ui.main.textContent="",schat.ui.main.setAttribute("class","panel-main");var a=b("div",{"class":"panel panel-default panel-user"}),c=a.appendChild(b("div",{"class":"panel-heading"})).appendChild(b("h3"));this.nick=c.appendChild(b("span")),c.appendChild(document.createTextNode(" ")),this.status=c.appendChild(b("small")),a.appendChild(b("div",{"class":"panel-body"})),schat.ui.main.appendChild(a)}var b=schat.ui.createElement;a.prototype.setUser=function(a){this.nick.textContent=a.name;var b=schat.ui.user.status(a.status);this.status.setAttribute("data-tr",b),this.status.textContent=tr(b)},schat.ui.UserWidget=a,schat.ui.user=schat.ui.user||{},schat.ui.user.status=function(a){switch(a=a||0){case 0:return"user-status-offline";case 1:return"user-status-online";case 2:case 3:return"user-status-away";case 4:return"user-status-dnd";case 5:return"user-status-free";default:return""}}}(),$(document).ready(function(){schat.net.client.start(),$("body").on("click",".internal",function(a){a.preventDefault(),schat.router.navigate($(this).attr("href"))}),schat.router.checkRoutes(document.location.pathname)});