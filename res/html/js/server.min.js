Pages.onInfo=function(){$("#info-content > h1").html(Messages.nameTemplate(JSON.parse(SimpleChat.channel(Settings.id))));$("#main-spinner").css("display","inline-block");Hosts.read(SimpleChat.feed("hosts",false))};var Hosts={body:function(a){Hosts.read(a);$("#main-spinner").hide();SimpleChat.request("query","hosts",{action:"activity"})},feed:function(a){if(Pages.current==0){return}if(!a.hasOwnProperty("type")){return}if(a.own!==true){return}if(a.name!=="hosts"){return}Hosts[a.type](a.data)},processSingleHost:function(c,b){var d="#"+c;if(!$(d).length){var a='<tr class="host-row" id="'+c+'"><td class="os-cell"><i class="icon-status-offline host-status"></i><i class="icon-os"></i></td><td class="host-name"></td><td><i class="icon-info tooltip"></i> <span class="last-activity"></span></td><td><a class="btn btn-small" data-tr="unlink">Unlink</a></td></tr>';$("#account-table > tbody").append(a)}else{$(d).show()}$(d+" > .host-name").text(b.name);$(d+" .icon-os").attr("class","icon-os os-"+Pages.os(b.os));$(d+" .icon-info").attr("title",Utils.table({version:b.version,last_ip:b.host}));$(d+" .host-status").attr("class",(b.online===true?"icon-status":"icon-status-offline")+" host-status")},read:function(b){if(!b.hasOwnProperty("head")){return}$(".host-row").hide();for(var a in b){if(b.hasOwnProperty(a)&&a.length==34){Hosts.processSingleHost(a,b[a])}}$("#hosts-content p").show();$("#hosts-content #fieldset").show();$(".host-row:hidden").remove();$(".tooltip").easyTooltip();Hosts.retranslate()},readActivity:function(b,a){$("#"+b+" .last-activity").html(DateTime.template(a.date,true))},reply:function(b){for(var a in b){if(b.hasOwnProperty(a)&&a.length==34){Hosts.readActivity(a,b[a])}}},retranslate:function(){Utils.TR("my_computers");Utils.TR("my_computers_desc");Utils.TR("computer_name");Utils.TR("last_activity");Utils.TR("actions");Utils.TR("unlink")}};$(document).ready(function(){SimpleChat.retranslated.connect(Hosts,Hosts.retranslate);ChatView.feed.connect(Hosts,Hosts.feed)});