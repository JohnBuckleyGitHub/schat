var Channels={acl:-1,reload:function(){if(Pages.current!=1){return}if(SimpleChat.isOnline()){Loader.spinner.add("loading/info")}Channels.info(SimpleChat.feed(Settings.getId(),"info",4),300)},info:function(b,a){if(b.hasOwnProperty("title")){$("#channel-title-text").text(b.title.text)}if(a!=300){Loader.spinner.remove("loading/info")}},feed:function(a){if(!a.hasOwnProperty("type")||a.id!==Settings.getId()){return}if(a.feed=="info"){Channels.info(a.data,a.status)}else{if(a.feed=="acl"){Channels.online()}}},online:function(){Channels.acl=SimpleChat.match(Settings.getId(),SimpleChat.id());var a=$("#settings-dropdown");if(Channels.acl==7){if(!a.length){$("#channel-buttons").append('<div id="settings-dropdown" class="dropdown pull-right"><a id="channel-settings" data-toggle="dropdown" href="#"></a>'+Channels.menu()+"</div>")}}else{a.remove()}},menu:function(){return'<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu"><li><a href="#" data-tr="channels_title" class="modal-toggle" data-handler="title">'+Utils.tr("channels_title")+'</a></li><li><a href="#" data-tr="channels_options" class="modal-toggle" data-handler="options">'+Utils.tr("channels_options")+"</a></li></ul>"}};Modal.create.title=function(b){ChatView.allowFocus(true);var a=$("#modal-header h3");a.text(b.target.innerText);a.attr("data-tr","channels_title");$("#modal-body").append('<form id="title-form"><div id="title-group" class="control-group"><input id="title-edit" type="text" maxlength="512"><button id="title-ok" type="submit" class="btn" data-tr="ok">'+Utils.tr("ok")+"</button></div></form>");$("#title-edit").val($("#channel-title-text").text())};Modal.shown.title=function(){$("#title-edit").focus()};Modal.hidden.title=function(){ChatView.allowFocus(false)};Modal.create.options=function(c){var b=$("#modal-header h3");b.text(c.target.innerText);b.attr("data-tr","channels_options");var a=$("#modal-body");a.append('<form><div id="visibility-row" class="row"><label for="visibility" data-tr="channels_visibility">'+Utils.tr("channels_visibility")+'</label><select id="visibility"><option data-tr="channels_default">'+Utils.tr("channels_default")+'</option><option data-tr="channels_always_visible">'+Utils.tr("channels_always_visible")+'</option><option data-tr="channels_hidden">'+Utils.tr("channels_hidden")+"</option></select></div></form>")};$(document).ready(function(){$("#page-header").append('<div id="channel-title"><div id="channel-title-text"></div></div>');var a=$("#modal-body");a.on("click.title","#title-ok",function(b){b.preventDefault();var c=$("#title-edit").val();$("#modal").modal("hide");if($("#channel-title-text").text()!=c){SimpleChat.request(Settings.getId(),"post","info/title",{value:c,options:7})}});a.on("change.visibility","#visibility",function(b){console.log($("#visibility option:selected"))})});Pages.onInfo.push(Channels.reload);if(typeof ChatView!=="undefined"){ChatView.reload.connect(Channels.reload);ChatView.feed.connect(Channels.feed)}if(typeof SimpleChat!=="undefined"){SimpleChat.online.connect(Channels.online)};