var Channels={acl:-1,reload:function(){if(Pages.current!=1){return}if(SimpleChat.isOnline()){Loader.spinner.add("loading/info")}Channels.info(SimpleChat.feed(Settings.getId(),"info",4),300)},info:function(b,a){if(b.hasOwnProperty("title")){$("#channel-title-text").text(b.title.text)}if(a!=300){Loader.spinner.remove("loading/info")}},feed:function(a){if(!a.hasOwnProperty("type")||a.id!==Settings.getId()){return}if(a.feed=="info"){Channels.info(a.data,a.status)}else{if(a.feed=="acl"){Channels.online()}}},online:function(){Channels.acl=SimpleChat.match(Settings.getId(),SimpleChat.id());var a=$("#settings-dropdown");if(Channels.acl==7){if(!a.length){$("#channel-buttons").append('<div id="settings-dropdown" class="dropdown pull-right"><a id="channel-settings" data-toggle="dropdown" href="#"></a>'+Channels.menu()+"</div>")}}else{a.remove()}},menu:function(){return'<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu"><li><a href="#" data-tr="channels_title" class="modal-toggle" data-handler="title">'+Utils.tr("channels_title")+"</a></li></ul>"}};Modal.create.title=function(c){ChatView.allowFocus(true);var a=$("#modal-header h3");a.text(c.target.innerText);a.attr("data-tr","channels_title");var b=$("#modal-body");b.append('<form id="title-form"><div id="title-group" class="control-group"><input id="title-edit" type="text" maxlength="512"><button id="title-ok" type="submit" class="btn" data-tr="ok">'+Utils.tr("ok")+"</button></div></form>");$("#title-edit").val($("#channel-title-text").text())};Modal.shown.title=function(){$("#title-edit").focus()};Modal.hidden.title=function(){ChatView.allowFocus(false)};$(document).ready(function(){$("#page-header").append('<div id="channel-title"><div id="channel-title-text"></div></div>');$("#modal-body").on("click.title","#title-ok",function(a){a.preventDefault();var b=$("#title-edit").val();$("#modal").modal("hide");if($("#channel-title-text").text()!=b){SimpleChat.request(Settings.getId(),"post","info/title",{value:b,options:7})}})});Pages.onInfo.push(Channels.reload);if(typeof ChatView!=="undefined"){ChatView.reload.connect(Channels.reload);ChatView.feed.connect(Channels.feed)}if(typeof SimpleChat!=="undefined"){SimpleChat.online.connect(Channels.online)};