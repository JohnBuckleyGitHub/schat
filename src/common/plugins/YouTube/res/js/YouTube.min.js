var YouTube={onAdd:function(a){if(0!=document.getElementById(a).getElementsByClassName("youtube").length){var b=$("#"+a+" .youtube");b.data("state",0),b.each(function(){var a=$(this).attr("data-youtube-v");$(this).after(' <i data-youtube-v="'+a+'" class="icon-spinner-small"></i>'),$.ajax({url:"http://gdata.youtube.com/feeds/api/videos/"+a+"?alt=json",dataType:"json",success:function(b){YouTube.setTitle(b,a)},error:function(){$('.icon-spinner-small[data-youtube-v="'+a+'"]').remove()}})})}},setTitle:function(a,b){$('.icon-spinner-small[data-youtube-v="'+b+'"]').remove();var c=$('.youtube[data-youtube-v="'+b+'"]');c.text(a.entry.title.$t),YouTube.isFlashInstalled()&&c.each(function(){if(0===$(this).data("state")){$(this).data("state",1);var a=SimpleChat.randomId();$(this).after('<a class="btn btn-youtube" id="'+a+'"><i class="icon-plus-small"></i></a>'),$("#"+a).data("state",0),$("#"+a).on("click",function(){YouTube.click(a,b)})}}),null===Settings.scrollTo&&alignChat()},click:function(a,b){var c=$("#"+a);1===c.data("state")?(c.html('<i class="icon-plus-small"></i>'),c.data("state",0),$("#"+a+"-player").remove(),alignChat()):($(".btn-youtube").html('<i class="icon-plus-small"></i>'),$(".btn-youtube").data("state",0),$(".youtube-player").remove(),c.html('<i class="icon-minus-small"></i>'),c.data("state",1),c.after(YouTube.player(a,b)),alignChat(),document.getElementById(a).scrollIntoView())},player:function(a,b){return'<div class="youtube-player" id="'+a+'-player">'+'<object width="480" height="360">'+'<param name="movie" value="https://www.youtube.com/v/'+b+'?fs=1">'+'<param name="allowFullScreen" value="true">'+'<embed src="https://www.youtube.com/v/'+b+'?fs=1"'+'type="application/x-shockwave-flash"'+'allowfullscreen="true"'+'width="480" height="360">'+"</embed></object></div>"},isFlashInstalled:function(){if(navigator.plugins&&navigator.plugins.length>0){var a="application/x-shockwave-flash",b=navigator.mimeTypes;if(b&&b[a]&&b[a].enabledPlugin&&b[a].enabledPlugin.description&&"true"==SimpleChat.value("YouTube/EmbedVideo"))return!0}return!1}};Messages.onAdd.push(YouTube.onAdd);