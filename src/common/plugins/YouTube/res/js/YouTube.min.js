var YouTube={onAdd:function(b){var a=$("#"+b+" .youtube");if(!a.length){return}a.data("state",0);a.each(function(){var c=$(this).attr("data-youtube-v");$(this).after(' <i data-youtube-v="'+c+'" class="icon-spinner-small"></i>');$.ajax({url:"http://gdata.youtube.com/feeds/api/videos/"+c+"?alt=json",dataType:"json",success:function(d){YouTube.setTitle(d,c)},error:function(){$('.icon-spinner-small[data-youtube-v="'+c+'"]').remove()}})})},setTitle:function(c,a){$('.icon-spinner-small[data-youtube-v="'+a+'"]').remove();var b=$('.youtube[data-youtube-v="'+a+'"]');b.text(c.entry.title.$t);b.each(function(){if($(this).data("state")===0){$(this).data("state",1);var d=$('<a class="btn btn-youtube"><i class="icon-plus-small"></i></a>');d.data("state",0);$(this).after(d);d.on("click",function(){YouTube.click(d)})}});alignChat()},click:function(a){if(a.data("state")===1){a.html('<i class="icon-plus-small"></i>');a.data("state",0)}else{a.html('<i class="icon-minus-small"></i>');a.data("state",1)}}};Messages.onAdd.push(YouTube.onAdd);