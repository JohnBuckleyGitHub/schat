+function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.load(this.options.remote)};b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},b.prototype.toggle=function(a){return this[this.isShown?"hide":"show"](a)},b.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(document.body),c.$element.show(),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one(a.support.transition.end,function(){c.$element.focus().trigger(e)}).emulateTransitionEnd(300):c.$element.focus().trigger(e)}))},b.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one(a.support.transition.end,a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},b.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.focus()},this))},b.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},b.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden.bs.modal")})},b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},b.prototype.backdrop=function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;d?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()):b&&b()};var c=a.fn.modal;a.fn.modal=function(c,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);f||e.data("bs.modal",f=new b(this,g)),"string"==typeof c?f[c](d):g.show&&f.show(d)})},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f,this).one("hide",function(){c.is(":visible")&&c.focus()})}),a(document).on("show.bs.modal",".modal",function(){a(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){a(document.body).removeClass("modal-open")})}(window.jQuery),function(){"use strict";window.schat={net:{},ui:{},utils:{},lang:{},page:""}}(),function(){"use strict";var a=window.schat.utils;a.isFunction=function(a){return"function"==typeof a},a.isArray=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)},a.randomId=function(){var a=new Array(16);return uuid.v4(null,a,0),base32.encode(a)},a.format=function(a,b){return a.replace(/{(\d+)}/g,function(a,c){return"undefined"!=typeof b[c]?b[c]:a})}}(),function(){"use strict";function a(a,b,c,d){var e=0,f=0,g=!1;("undefined"==typeof b||null===b)&&(b=2),a=a.toString(),d!==!1&&(a=a.replace(/&/g,"&amp;")),a=a.replace(/</g,"&lt;").replace(/>/g,"&gt;");var h={ENT_NOQUOTES:0,ENT_HTML_QUOTE_SINGLE:1,ENT_HTML_QUOTE_DOUBLE:2,ENT_COMPAT:2,ENT_QUOTES:3,ENT_IGNORE:4};if(0===b&&(g=!0),"number"!=typeof b){for(b=[].concat(b),f=0;f<b.length;f++)0===h[b[f]]?g=!0:h[b[f]]&&(e|=h[b[f]]);b=e}return b&h.ENT_HTML_QUOTE_SINGLE&&(a=a.replace(/'/g,"&#039;")),g||(a=a.replace(/"/g,"&quot;")),a}schat.utils.encode=a}(),function(){"use strict";function a(a){return SimpleChat.translate(a)}function b(b){$('[data-tr="'+b+'"]').html(a(b))}function c(){$("[data-tr]").each(function(){b($(this).attr("data-tr"))})}"undefined"!=typeof SimpleChat&&SimpleChat.retranslated.connect(function(){c()}),window.tr=a,window.TR=b,schat.lang.retranslate=c,window.Utils=window.Utils||{},window.Utils.tr=a,window.Utils.TR=b,window.Utils.retranslate=c}(),function(){"use strict";window.schat.ui.main=document.getElementById("main"),window.schat.ui.createElement=function(a,b,c){var d=document.createElement(a);for(var e in b)b.hasOwnProperty(e)&&d.setAttribute(e,b[e]);return"string"==typeof c?d.innerHTML=c:"object"==typeof c&&c.hasOwnProperty("text")&&(d.textContent=c.text),b&&b.hasOwnProperty("data-tr")&&(d.innerHTML=tr(b["data-tr"])),d}}(),function(){"use strict";var a=window.schat.ui.createElement,b=document.getElementById("modal"),c=a("div",{"class":"modal-dialog"}),d=c.appendChild(a("div",{"class":"modal-content"})),e=d.appendChild(a("div",{"class":"modal-header"}));e.appendChild(a("button",{"class":"close","data-dismiss":"modal","aria-hidden":"true"},"&times;"));var f=e.appendChild(a("h4",{"class":"modal-title"})),g=d.appendChild(a("div",{"class":"modal-body"})),h=d.appendChild(a("div",{"class":"modal-footer"}));b.appendChild(c),window.schat.ui.modal={element:b,header:e,title:f,body:g,footer:h,current:null},$(document).ready(function(){$(b).on("hidden.bs.modal",function(){f.textContent="",g.textContent="",h.textContent="",schat.ui.modal.current=null})})}(),function(){"use strict";function a(){schat.ui.main.textContent="",schat.ui.main.setAttribute("class","panel-main"),this.qt="undefined"!=typeof SimpleChat,this.date={index:0,stats:0};var a=schat.ui.createElement("div",{"class":"panel panel-default panel-rooms"});this.qt||a.appendChild(schat.ui.createElement("div",{"class":"panel-heading","data-tr":"common-rooms"})),this.rooms=schat.ui.createElement("div",{"class":"list-group"}),a.appendChild(this.rooms),schat.ui.main.appendChild(a),this.qt||(a=schat.ui.createElement("div",{"class":"panel panel-default panel-stats"}),a.appendChild(schat.ui.createElement("div",{"class":"panel-heading"},this.qt?tr("common-stats"):'<a href="/stats" class="internal" data-tr="common-stats">'+tr("common-stats")+"</a>")),this.stats=a.appendChild(schat.ui.createElement("div",{"class":"panel-body"})),schat.ui.main.appendChild(a))}a.prototype.setRooms=function(a){this.rooms.textContent="";for(var b=0;b<a.length;b++){var c=a[b][4];this.rooms.appendChild(schat.ui.createElement("div",{"class":"list-group-item"},'<span class="badge">'+a[b][2]+"</span>"+(2&c?'<i class="schat-icon schat-icon-pin pull-right"></i>':"")+(4&c?'<i class="schat-icon schat-icon-lock pull-right"></i>':"")+'<h5 class="list-group-item-heading">'+this.toUrl(a[b][0],a[b][1],c)+"</h5>"+'<small class="list-group-item-text text-muted">'+(""===a[b][3]?tr("channels-no-title"):schat.utils.encode(a[b][3]))+"</small>"))}},a.prototype.setStats=function(a){a=a[0],this.stats.innerHTML=schat.utils.format(tr("stats-stats"),[tr("stats-users",a.users[0]),tr("stats-rooms",a.rooms[0]),a.users[1],a.users[2]]),$(".timeago").timeago()},a.prototype.toUrl=function(a,b){return'<a class="internal" href="/talk/'+a+'">'+schat.utils.encode(b)+"</a>"},window.schat.ui.MainWidget=a}(),function(){"use strict";function a(){this.serverName=document.getElementById("server-name"),this.joinName=document.getElementById("join-name")}a.prototype.setName=function(a){this.serverName.textContent=a},window.schat.ui.RoomsNavbar=a}(),function(){"use strict";function a(){var a=SimpleChat.channel(SimpleChat.serverId());null!==a&&e.setName.call(e,a.Name),SimpleChat.feed(SimpleChat.serverId(),"list",1),SimpleChat.feed(SimpleChat.serverId(),"stats",1)}function b(a){"list"==a.feed&&("body"!=a.type||200!=a.status&&303!=a.status||f.setRooms(a.data.channels))}function c(){e.joinName.setAttribute("placeholder",tr("channels-channel-name"))}function d(){schat.lang.retranslate(),c(),a(),$("#join").on("click.join",function(a){a.preventDefault();var b=e.joinName.value;b.length>=3&&(ChannelsView.join(b),e.joinName.value="")}),$("body").on("click.channel",".nick",function(a){a.preventDefault(),ChannelsView.join($(this).attr("id"))})}schat.ui.MainWidget.prototype.toUrl=function(a,b,c){return'<a href="'+ChannelsView.toUrl(a,b)+'" class="nick color-'+(4&c?"green":"default")+'" id="'+a+'">'+schat.utils.encode(b)+"</a>"};var e=new schat.ui.RoomsNavbar,f=new schat.ui.MainWidget;"undefined"==typeof ChannelsView?window.ChannelsView={join:function(){},create:function(){},toUrl:function(){return"#"}}:(ChannelsView.feed.connect(function(a){b(a)}),ChannelsView.serverRenamed.connect(function(){e.setName.apply(e,arguments)})),"undefined"!=typeof SimpleChat&&(SimpleChat.online.connect(function(){a()}),SimpleChat.retranslated.connect(function(){c()})),$(document).ready(d)}();