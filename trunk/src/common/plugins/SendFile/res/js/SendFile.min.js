var SendFileUtils={button:function(a,b){return'<a class="btn btn-small btn-file-'+a+'" data-tr="file-'+a+'" href="chat-sendfile:'+a+"/"+b+'">'+Utils.tr("file-"+a)+"</a>"},setStateText:function(c,b){var a=$("#"+c+" .file-state");a.html(Utils.tr(b));a.attr("data-tr",b)},cancelled:function(a){SendFileUtils.setStateText(a,"file-cancelled");$("#"+a+" .file-buttons").remove();$("#"+a+" .file-progress").remove()},accepted:function(b,a){console.log(a);SendFileUtils.setStateText(b,"file-connecting");$("#"+b+" .file-name").text(a);$("#"+b+" .btn-file-saveas").remove()}};Messages.addFileMessage=function(b){var c=b.Id;var a='<div class="container '+b.Type+'-type" id="'+b.Id+'">';a+='<div class="blocks '+b.Direction+'">';a+='<div class="file-sender">'+DateTime.template(b.Date,b.Day)+Messages.nameBlock(b.Author)+"</div>";a+='<div class="file-block"><span class="file-name">'+b.File+'</span><br><span class="file-state">&nbsp;</span></div>';a+='<div class="file-buttons btn-group">'+SendFileUtils.button("cancel",c)+"</div>";a+='<div class="file-progress"><div class="bar"></div></div><div style="clear:both;"></div>';a+="</div></div>";Messages.addHintedRawMessage(a,b.Hint,c);if(b.Direction==="outgoing"){SendFileUtils.setStateText(c,"file-waiting")}else{$("#"+c+" .file-state").html(SimpleChat.bytesToHuman(b.Size));$("#"+c+" .file-buttons").prepend(SendFileUtils.button("saveas",c))}};if(typeof SendFile==="undefined"){SendFile={}}else{SendFile.cancelled.connect(SendFileUtils.cancelled);SendFile.accepted.connect(SendFileUtils.accepted)};