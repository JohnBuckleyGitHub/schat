Messages.days=[],Messages.day=function(a){if(null===document.getElementById("day-"+a)){var b=document.createElement("div");b.id="day-"+a,b.innerHTML='<div class="day-header expanded" id="day-header-'+a+'">'+'<div class="day-day"><a href="#" data-day="'+a+'">'+SimpleChat.day(a)+"</a></div>"+'<div class="day-close"><a class="close" href="#">&times;</a></div>'+'<div class="day-badge">0</div>'+"</div>"+'<div class="day-body" id="day-body-'+a+'"></div>',-1==Messages.days.indexOf(a)&&(Messages.days.push(a),Messages.days.sort());var c=Messages.days.indexOf(a);if(c==Messages.days.length-1)window.Chat.appendChild(b);else{var d=document.getElementById("day-"+Messages.days[c+1]);d.parentNode.insertBefore(b,d)}}},Messages.addRawMessage=function(a,b){if("string"!=typeof b||10!=b.length){var c=new Date;b=c.getFullYear()+"_"+DateTime.pad(c.getMonth()+1)+"_"+DateTime.pad(c.getDate())}var d=document.getElementById("day-body-"+b);null===d&&(Messages.day(b),d=document.getElementById("day-body-"+b)),d.appendChild(a),Messages.add(a.id)},Messages.reload=function(){0==Pages.current&&($(".day").remove(),Messages.days=[],alignChat())},DateTime.update=function(a){var b=new Date(a.Date),c=$("#"+a.Id+" .date-time-block");a.Day===!0&&c.children(".day").text(DateTime.day(b)),c.children(".time").text(DateTime.time(b)),c.children(".seconds").text(DateTime.seconds(b));var d=$("#"+a.Id);d.attr("data-time",a.Date),"before"==a.Hint.Hint&&null!==document.getElementById(a.Hint.Id)?d.detach().insertBefore("#"+a.Hint.Id):d.detach().appendTo("#day-"+a.Hint.Day+" .day-body"),alignChat()},Messages.retranslate=function(){$("[data-day]").each(function(){$(this).text(SimpleChat.day($(this).attr("data-day")))})},function(){try{ChatView.reload.connect(Messages.reload),SimpleChat.retranslated.connect(Messages.retranslate)}catch(a){}}(),$(document).ready(function(){var a=$("body");a.on("click",".day-day a",function(a){a.preventDefault();var b="#day-"+$(this).attr("data-day"),c=$(b+" .day-header");c.hasClass("expanded")?(c.removeClass("expanded"),$(b+" .day-body").hide()):(c.addClass("expanded"),$(b+" .day-body").show(),$(b+" .day-badge").text(0),$(b+" .day-badge").hide()),alignChat()}),a.on("click",".day-close a",function(a){a.preventDefault();var b=$(this).parent().parent().attr("id").substring(11),c=document.getElementById("day-"+b);c.parentNode.removeChild(c),ChatView.removeDay(b);var d=Messages.days.indexOf(b);-1!=d&&Messages.days.splice(d,1),alignChat()}),a.on("mouseenter",".day-day",function(){$("#day-"+$(this).parent().attr("id").substring(11)+" .day-close").fadeIn("fast")}),a.on("mouseleave",".day-header",function(){$("#day-"+$(this).parent().attr("id").substring(4)+" .day-close").fadeOut("fast")})});