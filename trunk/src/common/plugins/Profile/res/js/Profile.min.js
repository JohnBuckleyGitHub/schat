Profile.Field.country=function(a,b){if(2==b.length){var c=Utils.tr("country-"+b);c!="country-"+b&&Profile.addRow(a,'<i class="flag-'+b+'"></i> <span data-tr="country-'+b+'">'+c+"</span>")}},Profile.Field.city=Profile.Field.name,Profile.Field.site=function(a,b){var c=Utils.left(schat.utils.encode(b.replace(/\s+/gi,"")),254),d=c;0==c.indexOf("http://")?d=c.slice(7):0==c.indexOf("https://")?d=c.slice(8):c="http://"+c,Profile.addRow(a,'<a href="'+c+'">'+d+"</a>")},Profile.Field.email=function(a,b){var c=Utils.left(schat.utils.encode(b.replace(/\s+/gi,"")),254);0==c.indexOf("mailto:")&&(c=c.slice(7)),Profile.addRow(a,'<a href="mailto:'+c+'">'+c+"</a>")};var ProfilePlugin={process:function(a,b){var c="#"+a;if(!b.hasOwnProperty("geo"))return $(c+' [class^="flag-"]').remove(),void 0;var d=b.geo.country.toLowerCase();2==d.length&&$(c).append(' <span><i class="flag-'+d+'" title="'+Utils.tr("country-"+d)+'"></i></span>')},connection:function(a){var b=schat.ui.modal.body;if("number"==typeof a.tz){var c=new Date;c=new Date(c.getTime()+6e4*c.getTimezoneOffset()+1e3*a.tz),b.innerHTML+=Utils.row("field-tz",DateTime.time(c))}if(a.hasOwnProperty("geo")){var d=a.geo.country.toLowerCase();if(2==d.length&&(b.innerHTML+=Utils.row("field-country",'<i class="flag-'+d+'"></i> '+'<span data-tr="country-'+d+'">'+Utils.tr("country-"+d)+"</span>")),""!=a.geo.org){var e=a.geo.org,f=e.indexOf(" ");-1!=f&&(b.innerHTML+=Utils.row("field-isp",Utils.left(e.slice(f),100)))}}}};UserHooks.process.push(ProfilePlugin.process),UserHooks.connection.push(ProfilePlugin.connection);