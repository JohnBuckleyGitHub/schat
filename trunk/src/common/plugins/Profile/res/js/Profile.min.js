Profile.Field.country=function(b,c){if(c.length!=2){return}var a=Utils.tr("country-"+c);if(a=="country-"+c){return}Profile.addRow(b,'<i class="flag-'+c+'"></i> <span data-tr="country-'+c+'">'+a+"</span>")};Profile.Field.city=Profile.Field.name;Profile.Field.site=function(a,b){var d=Utils.left(htmlspecialchars(b.replace(/\s+/gi,"")),254);var c=d;if(d.indexOf("http://")==0){c=d.slice(7)}else{if(d.indexOf("https://")==0){c=d.slice(8)}else{d="http://"+d}}Profile.addRow(a,'<a href="'+d+'">'+c+"</a>")};Profile.Field.email=function(a,b){var c=Utils.left(htmlspecialchars(b.replace(/\s+/gi,"")),254);if(c.indexOf("mailto:")==0){c=c.slice(7)}Profile.addRow(a,'<a href="mailto:'+c+'">'+c+"</a>")};var ProfilePlugin={process:function(b,a){var d="#"+b;if(!a.hasOwnProperty("geo")){$(d+' [class^="flag-"]').remove();return}var c=a.geo.country.toLowerCase();if(c.length!=2){return}$(d).append(' <span><i class="flag-'+c+'" title="'+Utils.tr("country-"+c)+'"></i></span>')},connection:function(c){var d=$("#modal-body");if(typeof c.tz==="number"){var b=new Date();b=new Date(b.getTime()+b.getTimezoneOffset()*60000+c.tz*1000);d.append(Utils.row("field-tz",DateTime.time(b)))}if(c.hasOwnProperty("geo")){var e=c.geo.country.toLowerCase();if(e.length==2){d.append(Utils.row("field-country",'<i class="flag-'+e+'"></i> <span data-tr="country-'+e+'">'+Utils.tr("country-"+e)+"</span>"))}if(c.geo.org!=""){var f=c.geo.org;var a=f.indexOf(" ");if(a!=-1){d.append(Utils.row("field-isp",Utils.left(f.slice(a),100)))}}}}};UserHooks.process.push(ProfilePlugin.process);UserHooks.connection.push(ProfilePlugin.connection);