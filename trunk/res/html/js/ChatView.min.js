var Settings={id:""};var Utils={left:function(a,b){if(typeof a!=="string"){return""}if(a.length<b){return a}return a.slice(0,b)},retranslate:function(){$("[data-tr]").each(function(){Utils.TR($(this).attr("data-tr"))})},simplified:function(a){return $.trim(a.replace(/\s+/gi," "))},table:function(c){var b="<table><tbody>";for(var a in c){if(c.hasOwnProperty(a)){b+="<tr><td>"+Utils.tr(a)+"</td><td>"+c[a]+"</td></tr>"}}b+="</table></tbody>";return b},tr:function(a){return SimpleChat.translate(a)},TR:function(a){$("[data-tr='"+a+"']").html(Utils.tr(a))},log:function(b){var a=new Date();console.log(DateTime.time(a)+DateTime.seconds(a)+"."+a.getMilliseconds()+" "+b)},row:function(b,c){if(typeof c!=="string"||c===""){return""}var a='<div class="field-row field-'+b+'">';a+='<span class="field-row-label"><span data-tr="'+b+'">'+Utils.tr(b)+"</span>:</span> ";a+='<span class="field-row-value">'+c+"</span>";return a},labels:function(c){var a=0;var b=0;c.each(function(){b=$(this).width();if(b>a){a=b}});c.width(a+4)}};var Pages={current:0,onInfo:[],onMessages:[],os:function(a){if(a==0||a>79){return"unknown"}if(a>=1&&a<20){return"windows"}if(a>=20&&a<40){return"osx"}if(a==41){return"ubuntu"}if(a==42){return"gentoo"}if(a==43){return"debian"}if(a==44){return"opensuse"}if(a==45){return"fedora"}if(a>=40){return"linux"}return"unknown"},setPage:function(b){SimpleChat.setTabPage(Settings.id,b);Pages.current=b;if(b==0){$("#messages").addClass("active");$("#info").removeClass("active");alignChat();for(var a=0;a<Pages.onMessages.length;a++){Pages.onMessages[a]()}}else{if(b==1){$("#messages").removeClass("active");$("#info").addClass("active");for(a=0;a<Pages.onInfo.length;a++){Pages.onInfo[a]()}}}}};Pages.onInfo.push(function(){$("#info-content > h1").html(Messages.nameTemplate(JSON.parse(SimpleChat.channel(Settings.id))))});var Messages={onAdd:[],addChannelMessage:function(b){if($("#"+b.Id).length){Messages.updateChannelMessage(b);return}var a='<div class="container '+b.Type+'-type" id="'+b.Id+'">';a+='<div class="blocks ';a+=b.Direction;if(b.Status!==undefined){a+=" "+b.Status}if(b.Command=="me"){a+=" me-action"}a+='">';a+=DateTime.template(b.Date,b.Day);a+=Messages.nameBlock(b.Author);a+='<span class="msg-body-block">'+b.Text+"</span>";a+="</div>";a+="</div>";Messages.addHintedRawMessage(a,b.Hint,b.Id)},addHintedRawMessage:function(b,c,d){if(c.Hint=="before"){if(!$("#"+c.Id).length){Messages.addRawMessage(b,d);return}$("#"+c.Id).before(b);for(var a=0;a<Messages.onAdd.length;a++){Messages.onAdd[a](d)}alignChat()}else{Messages.addRawMessage(b,d)}},addMessage:function(a){var b=a.Func;if(b==undefined){return}try{Messages[b](a)}catch(c){}},addRawMessage:function(b,c){$("#Chat").append(b);for(var a=0;a<Messages.onAdd.length;a++){Messages.onAdd[a](c)}alignChat()},addServiceMessage:function(b){var a='<div class="container '+b.Type+'-type" id="'+b.Id+'">';a+='<div class="blocks ';if(b.Extra!==undefined){a+=b.Extra}a+='">';a+=DateTime.template(b.Date,false);a+=Messages.nameBlock(b.Author);a+='<span class="msg-body-block">'+b.Text+"</span>";a+="</div>";a+="</div>";Messages.addRawMessage(a,b.Id)},nameBlock:function(b){var a=Messages.nameTemplate(b);if(a==""){return a}return'<span class="nick-block">'+a+"</span> "},nameTemplate:function(a){if(a===undefined){return""}return'<a class="nick '+a.Id+" color-"+a.Color+'" href="'+a.Url+'">'+htmlspecialchars(a.Name)+"</a>"},reload:function(){if(Pages.current!=0){return}$(".container").remove()},updateChannelMessage:function(c){var d="#"+c.Id+" > div.blocks";var b=c.Direction;if(c.Status!==undefined){b+=" "+c.Status}if(c.Command=="me"){b+=" me-action"}$(d).attr("class","blocks "+b);if(c.Date>0){var a=new Date(c.Date);if(c.Day===true){$(d+" > .date-time-block > .day").text(DateTime.day(a))}$(d+" > .date-time-block > .time").text(DateTime.time(a));$(d+" > .date-time-block > .seconds").text(DateTime.seconds(a))}},rename:function(c){var b=$("a."+c.Id);b.attr("href",c.Url);b.html(htmlspecialchars(c.Name))},recolor:function(c){var b=$("a."+c.Id);b.removeClassRegEx(/^color-/);b.addClass("color-"+c.Color)}};var DateTime={day:function(a){return DateTime.pad(a.getDate())+":"+DateTime.pad(a.getMonth()+1)+":"+a.getFullYear()},pad:function(a){return a<10?"0"+a:a},seconds:function(a){return":"+DateTime.pad(a.getSeconds())},template:function(d,a){var c="";if(d>0){var b=new Date(d);c+='<span class="date-time-block">';if(a===true){c+='<span class="day">'+DateTime.day(b)+"</span> "}c+='<span class="time">'+DateTime.time(b)+"</span>";c+='<span class="seconds">'+DateTime.seconds(b)+"</span> ";c+="</span>"}return c},time:function(a){return DateTime.pad(a.getHours())+":"+DateTime.pad(a.getMinutes())}};var Loader={jsfiles:[],done:function(){ChatView.loadFinished();alignChat()},load:function(b){for(var a=0;a<b.length;a++){Loader.jsfiles.push(b[a])}for(a=0;a<Loader.jsfiles.length;a++){Loader.loadJS(Loader.jsfiles[a])}},loadCSS:function(a){var b=document.createElement("link");b.setAttribute("rel","stylesheet");b.setAttribute("href",a);document.getElementsByTagName("head")[0].appendChild(b)},loadJS:function(a){$.ajax({url:a,dataType:"script",isLocal:true,success:function(){Loader.remove(a)},error:function(){Loader.remove(a)}})},remove:function(b){var a=Loader.jsfiles.indexOf(b);if(a===-1){return}Loader.jsfiles.splice(a,1);if(Loader.jsfiles.length===0){Loader.done()}}};var Modal={};$(document).ready(function(){$(window).resize(function(){alignChat()});$("#page-switcher-start").on("click",function(b){Pages.setPage(0)});$("#page-switcher-end").on("click",function(b){Pages.setPage(1)});var a=ChatView.jsfiles();if(a.length===0){Loader.done();return}$("body").on("click.modal",".modal-toggle",function(c){var b=$(this).attr("data-handler");if(b!==undefined){try{Modal[b](c)}catch(d){}}$("#modal").modal();c.preventDefault()});$("#modal").on("hidden",function(){$("#modal-header h3 *").remove();$("#modal-body *").remove()});$("#modal").on("shown",function(){Utils.labels($("#modal-body .field-row-label"))});Loader.load(a)});function alignChat(){var c=window.innerHeight;if(c>0){var b=document.getElementById("Chat");var a=b.offsetHeight;if(c-a>0){b.style.position="relative";b.style.top=(c-a-4)+"px"}else{b.style.position="static"}}document.body.scrollTop=document.body.offsetHeight}function showSeconds(a){if(a){$("#body").removeClass("no-seconds")}else{$("#body").addClass("no-seconds")}}function showService(a){if(a){$("#body").removeClass("no-service")}else{$("#body").addClass("no-service")}alignChat()}function htmlspecialchars(c,h,g,b){var e=0,d=0,f=false;if(typeof h==="undefined"||h===null){h=2}if(typeof c!=="string"){return""}c=c.toString();if(b!==false){c=c.replace(/&/g,"&amp;")}c=c.replace(/</g,"&lt;").replace(/>/g,"&gt;");var a={ENT_NOQUOTES:0,ENT_HTML_QUOTE_SINGLE:1,ENT_HTML_QUOTE_DOUBLE:2,ENT_COMPAT:2,ENT_QUOTES:3,ENT_IGNORE:4};if(h===0){f=true}if(typeof h!=="number"){h=[].concat(h);for(d=0;d<h.length;d++){if(a[h[d]]===0){f=true}else{if(a[h[d]]){e=e|a[h[d]]}}}h=e}if(h&a.ENT_HTML_QUOTE_SINGLE){c=c.replace(/'/g,"&#039;")}if(!f){c=c.replace(/"/g,"&quot;")}return c}(function(a){a.fn.removeClassRegEx=function(f){var e=a(this).attr("class");if(!e||!f){return false}var c=[];e=e.split(" ");for(var d=0,b=e.length;d<b;d++){if(!e[d].match(f)){c.push(e[d])}}a(this).attr("class",c.join(" "))}})(jQuery);if(typeof ChatView==="undefined"){SimpleChat={channel:function(a){return"{}"},translate:function(a){return a},setTabPage:function(b,a){},feed:function(b,a){return{}},randomId:function(){return""},bytesToHuman:function(a){return"0 bytes"}};ChatView={jsfiles:function(){return[]},loadFinished:function(){}}}else{ChatView.reload.connect(Messages.reload);ChatView.message.connect(Messages.addMessage);SimpleChat.retranslated.connect(Utils.retranslate);SimpleChat.renamed.connect(Messages.rename);SimpleChat.recolored.connect(Messages.recolor)};