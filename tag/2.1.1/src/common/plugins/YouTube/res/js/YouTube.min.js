var YouTube={onAdd:function(b){if(document.getElementById(b).getElementsByClassName("youtube").length==0){return}var a=$("#"+b+" .youtube");a.data("state",0);a.each(function(){var c=$(this).attr("data-youtube-v");$(this).after(' <i data-youtube-v="'+c+'" class="icon-spinner-small"></i>');$.ajax({url:"http://gdata.youtube.com/feeds/api/videos/"+c+"?alt=json",dataType:"json",success:function(d){YouTube.setTitle(d,c)},error:function(){$('.icon-spinner-small[data-youtube-v="'+c+'"]').remove()}})})},setTitle:function(c,a){$('.icon-spinner-small[data-youtube-v="'+a+'"]').remove();var b=$('.youtube[data-youtube-v="'+a+'"]');b.text(c.entry.title.$t);if(YouTube.isFlashInstalled()){b.each(function(){if($(this).data("state")===0){$(this).data("state",1);var d=SimpleChat.randomId();$(this).after('<a class="btn btn-youtube" id="'+d+'"><i class="icon-plus-small"></i></a>');$("#"+d).data("state",0);$("#"+d).on("click",function(){YouTube.click(d,a)})}})}if(Settings.scrollTo===null){alignChat()}},click:function(c,a){var b=$("#"+c);if(b.data("state")===1){b.html('<i class="icon-plus-small"></i>');b.data("state",0);$("#"+c+"-player").remove();alignChat()}else{$(".btn-youtube").html('<i class="icon-plus-small"></i>');$(".btn-youtube").data("state",0);$(".youtube-player").remove();b.html('<i class="icon-minus-small"></i>');b.data("state",1);b.after(YouTube.player(c,a));alignChat();document.getElementById(c).scrollIntoView()}},player:function(b,a){return'<div class="youtube-player" id="'+b+'-player"><object width="480" height="360"><param name="movie" value="https://www.youtube.com/v/'+a+'?fs=1"><param name="allowFullScreen" value="true"><embed src="https://www.youtube.com/v/'+a+'?fs=1"type="application/x-shockwave-flash"allowfullscreen="true"width="480" height="360"></embed></object></div>'},isFlashInstalled:function(){if(navigator.plugins&&navigator.plugins.length>0){var b="application/x-shockwave-flash";var a=navigator.mimeTypes;if(a&&a[b]&&a[b].enabledPlugin&&a[b].enabledPlugin.description&&SimpleChat.value("YouTube/EmbedVideo")=="true"){return true}}return false}};Messages.onAdd.push(YouTube.onAdd);