Console.feed.storage.put.password=function(a){console.log(a);$("#password-spinner").addClass("hide");clearTimeout(Console.password.timeout);if(a.status==200){Loader.spinner.add("loading/try");SimpleChat.get(SimpleChat.serverId(),"console/try")}else{Console.password.setError(a.status)}};Console.password={timeout:null,load:function(){$.ajax({url:"password.html",isLocal:true,success:Console.password.loaded})},loaded:function(a){$("#page").html(a);Console.current="password";Utils.retranslate();Console.password.adjustWidth();var b=$("#new-password");b.focus();$("#save").on("click.password",function(d){d.preventDefault();var c=Console.password.verify();if(c!==""){Console.password.setError(c);return}Console.password.timeout=setTimeout(function(){$("#password-spinner").removeClass("hide")},400);SimpleChat.request(SimpleChat.serverId(),"put","storage/password",{value:ConsoleView.toPassword($("#new-password").val())})});$("#cancel").on("click.password",function(c){c.preventDefault();Loader.spinner.add("loading/try");SimpleChat.get(SimpleChat.serverId(),"console/try")})},verify:function(){var a=$("#new-password").val();if(a!==$("#confirm-new-password").val()){return"console_password_mismatch"}var b=a.length;if(b==0){return"console_empty_password"}if(b<8){return"console_password_short"}return""},setError:function(b){$("#new-password-group").addClass("error");$("#confirm-new-password-group").addClass("error");var a=$("#error");if(typeof b==="number"){a.removeAttr("data-tr");a.html("<strong>"+b+"</strong> "+SimpleChat.statusText(b))}else{a.attr("data-tr",b);a.html(Utils.tr(b))}a.fadeIn("fast")},adjustWidth:function(){Utils.adjustWidth($(".control-label"));Utils.adjustWidth($("button"))}};if(typeof SimpleChat!=="undefined"){SimpleChat.retranslated.connect(Console.password.adjustWidth)};